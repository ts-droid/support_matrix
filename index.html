<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Support Matrix</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="ambient"></div>
    <main class="layout">
      <header class="hero">
        <div class="hero-top">
          <p class="kicker">Support Matrix</p>
          <div class="lang-switch" role="group" aria-label="Language switch">
            <button type="button" id="langSv" class="ghost lang-btn">üá∏üá™ Svenska</button>
            <button type="button" id="langEn" class="ghost lang-btn">üá¨üáß English</button>
          </div>
        </div>
        <h1 data-i18n="heroTitle">Beslutsst√∂d f√∂r supportfl√∂den</h1>
        <p data-i18n="heroDesc">
          V√§lj √§rendetyp, kundtyp, varum√§rke och produktgrupp f√∂r att f√• rekommenderad hantering.
          Uppdatera allt via Admin-l√§get.
        </p>
      </header>

      <section class="card" aria-labelledby="flow-title">
        <div class="section-head">
          <h2 id="flow-title" data-i18n="flowTitle">Supportfl√∂de</h2>
        </div>

        <div class="flow-grid">
          <label>
            <span data-i18n="labelCaseType">√Ñrendetyp</span>
            <select id="caseType"></select>
          </label>
          <label>
            <span data-i18n="labelCustomerType">Kundtyp</span>
            <select id="customerType"></select>
          </label>
          <label>
            <span data-i18n="labelBrand">Varum√§rke</span>
            <select id="brand"></select>
          </label>
          <label>
            <span data-i18n="labelCategory">Produktgrupp</span>
            <select id="category"></select>
          </label>
        </div>

        <article class="result" id="result">
          <h3 data-i18n="resultTitle">Rekommenderad hantering</h3>
          <p data-i18n="resultPrompt">G√∂r dina val f√∂r att f√• instruktion.</p>
        </article>

        <article class="flow-visual" aria-labelledby="flow-visual-title">
          <h3 id="flow-visual-title" data-i18n="flowVisualTitle">Grafiskt fl√∂de</h3>
          <div id="flowChart" class="flow-chart"></div>
        </article>
      </section>

      <section class="card" aria-labelledby="admin-title">
        <div class="section-head">
          <h2 id="admin-title" data-i18n="adminTitle">Admin</h2>
          <div class="admin-actions">
            <a class="ghost action-link" href="/intake" target="_blank" rel="noreferrer" data-i18n="openIntakeForm">Open Brand Intake Form</a>
            <button id="downloadCsvTemplate" class="ghost" data-i18n="csvTemplateBtn">CSV-mall</button>
            <label class="ghost file-import" for="importCsv" data-i18n="importCsvBtn">Importera CSV</label>
            <input id="importCsv" type="file" accept=".csv,text/csv" />
            <button id="exportJson" class="ghost" data-i18n="exportJsonBtn">Exportera JSON</button>
            <label class="ghost file-import" for="importJson" data-i18n="importJsonBtn">Importera JSON</label>
            <input id="importJson" type="file" accept="application/json" />
            <button id="resetData" class="ghost" data-i18n="resetBtn">√Öterst√§ll exempeldata</button>
          </div>
        </div>
        <p id="importStatus" class="status-line" aria-live="polite"></p>

        <div class="admin-grid">
          <form id="supplierForm" class="admin-form">
            <h3 data-i18n="supplierFormTitle">L√§gg till leverant√∂r</h3>
            <input name="name" data-i18n-placeholder="phName" placeholder="Namn" required />
            <input name="email" data-i18n-placeholder="phEmail" placeholder="E-post" />
            <textarea name="notes" data-i18n-placeholder="phNotes" placeholder="Notering"></textarea>
            <button type="submit" data-i18n="saveSupplierBtn">Spara leverant√∂r</button>
          </form>

          <form id="brandForm" class="admin-form">
            <h3 data-i18n="brandFormTitle">L√§gg till varum√§rke</h3>
            <input name="name" data-i18n-placeholder="phBrand" placeholder="Varum√§rke" required />
            <select name="supplierId" id="brandSupplier" required></select>
            <button type="submit" data-i18n="saveBrandBtn">Spara varum√§rke</button>
          </form>

          <form id="categoryForm" class="admin-form">
            <h3 data-i18n="categoryFormTitle">L√§gg till produktgrupp</h3>
            <input name="name" data-i18n-placeholder="phCategory" placeholder="Produktgrupp" required />
            <button type="submit" data-i18n="saveCategoryBtn">Spara produktgrupp</button>
          </form>

          <form id="ruleForm" class="admin-form wide">
            <h3 data-i18n="ruleFormTitle">L√§gg till hanteringsregel</h3>
            <div class="rule-grid">
              <select name="caseType" id="ruleCaseType" required></select>
              <select name="customerType" id="ruleCustomerType" required></select>
              <select name="brandId" id="ruleBrand" required></select>
              <select name="categoryId" id="ruleCategory" required></select>
            </div>
            <input name="headline" data-i18n-placeholder="phHeadline" placeholder="Rubrik / kort sammanfattning" required />
            <textarea
              name="instructions"
              data-i18n-placeholder="phInstructions"
              placeholder="Steg f√∂r hantering (en rad per steg)"
              required
            ></textarea>
            <input name="responsible" data-i18n-placeholder="phResponsible" placeholder="Ansvarig (ex: 1st line / Leverant√∂r)" />
            <input name="sla" data-i18n-placeholder="phSla" placeholder="SLA (ex: svar inom 24h)" />
            <button type="submit" data-i18n="saveRuleBtn">Spara regel</button>
          </form>
        </div>

        <div class="tables">
          <div>
            <h3 data-i18n="suppliersListTitle">Leverant√∂rer</h3>
            <ul id="supplierList"></ul>
          </div>
          <div>
            <h3 data-i18n="brandsListTitle">Varum√§rken</h3>
            <ul id="brandList"></ul>
          </div>
          <div>
            <h3 data-i18n="categoriesListTitle">Produktgrupper</h3>
            <ul id="categoryList"></ul>
          </div>
          <div>
            <h3 data-i18n="rulesListTitle">Regler</h3>
            <ul id="ruleList"></ul>
          </div>
        </div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
